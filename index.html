<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Milli Karwaan Public School Balrampur</title>
  <meta name="description" content="Official portal of Milli Karwaan Public School Balrampur - Education, Homework, Events & More"/>

  <style>
    /* === GLOBAL STYLES === */
    :root {
      --primary: #1a237e;
      --primary-light: #3d5afe;
      --primary-dark: #000051;
      --accent: #00e676;
      --accent-dark: #00c853;
      --text: #f8f9fa;
      --text-secondary: #b0bec5;
      --bg: #0a1128;
      --bg-light: #131c31;
      --card-bg: rgba(20, 30, 58, 0.7);
      --border-glow: 0 0 15px rgba(61, 90, 254, 0.4);
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --font-main: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    }

    .dark-theme {
      --primary: #2c3e50;
      --primary-light: #3498db;
      --primary-dark: #1a2530;
      --accent: #e74c3c;
      --accent-dark: #c0392b;
      --text: #ecf0f1;
      --text-secondary: #95a5a6;
      --bg: #1a1a2e;
      --bg-light: #16213e;
      --card-bg: rgba(25, 39, 59, 0.85);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-main);
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
      transition: var(--transition);
      min-height: 100vh;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(58, 95, 200, 0.1), transparent 30%),
        radial-gradient(circle at 80% 70%, rgba(231, 76, 60, 0.1), transparent 30%);
      background-attachment: fixed;
    }

    img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    a {
      color: var(--primary-light);
      text-decoration: none;
      transition: var(--transition);
    }

    a:hover {
      color: var(--accent);
    }

    button, input, textarea, select {
      font-family: inherit;
      border: none;
      outline: none;
    }

    button {
      cursor: pointer;
      background: none;
    }

    input, textarea, select {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 12px;
      color: var(--text);
      backdrop-filter: blur(10px);
      transition: var(--transition);
    }

    input:focus, textarea:focus, select:focus {
      border-color: var(--primary-light);
      box-shadow: var(--border-glow);
    }

    .btn {
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-primary {
      background: var(--primary-light);
      color: white;
      box-shadow: var(--border-glow);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(61, 90, 254, 0.5);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-outline {
      background: transparent;
      color: var(--primary-light);
      border: 1px solid var(--primary-light);
    }

    .btn-outline:hover {
      background: rgba(61, 90, 254, 0.1);
      box-shadow: var(--border-glow);
    }

    .glow-text {
      text-shadow: 0 0 10px rgba(61, 90, 254, 0.6);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    section {
      padding: 80px 0;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }

    section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .section-title {
      font-size: 2.5rem;
      margin-bottom: 40px;
      text-align: center;
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--accent);
      border-radius: 2px;
    }

    /* === HEADER === */
    header {
      position: relative;
      height: 120px;
      background: var(--bg-light);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo {
      height: 80px;
      width: auto;
      filter: drop-shadow(0 0 10px rgba(61, 90, 254, 0.3));
    }

    .school-info {
      display: flex;
      flex-direction: column;
    }

    .school-name {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text);
    }

    .school-address {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .call-btn {
      background: var(--accent);
      color: white;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 0 15px rgba(0, 230, 118, 0.4);
      transition: var(--transition);
    }

    .call-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 230, 118, 0.5);
    }

    /* === NAVIGATION === */
    nav {
      position: sticky;
      top: 0;
      z-index: 999;
      background: rgba(10, 17, 40, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 15px 0;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-links {
      display: flex;
      gap: 30px;
      list-style: none;
    }

    .nav-links a {
      color: var(--text-secondary);
      font-weight: 500;
      position: relative;
      padding: 5px 0;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--accent);
      transition: var(--transition);
    }

    .nav-links a:hover {
      color: var(--text);
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    .menu-toggle {
      display: none;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
    }

    .menu-toggle span {
      width: 25px;
      height: 3px;
      background: var(--text);
      border-radius: 3px;
      transition: var(--transition);
    }

    /* === GATE MODAL === */
    .gate-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--bg) 0%, var(--bg-light) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 1;
      visibility: visible;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .gate-overlay.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .gate-modal {
      background: var(--card-bg);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 40px;
      width: 90%;
      max-width: 500px;
      box-shadow: var(--shadow);
      transform: scale(1);
      transition: transform 0.5s ease;
      border: 1px solid rgba(61, 90, 254, 0.2);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), var(--border-glow);
    }

    .gate-overlay.hidden .gate-modal {
      transform: scale(0.9);
    }

    .gate-title {
      font-size: 2rem;
      margin-bottom: 20px;
      text-align: center;
      color: var(--primary-light);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .error {
      color: #e74c3c;
      font-size: 0.85rem;
      margin-top: 5px;
      display: none;
    }

    /* === SIDEBAR === */
    .sidebar {
      position: fixed;
      right: 30px;
      top: 150px;
      width: 300px;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      box-shadow: var(--shadow);
      z-index: 900;
      transform: translateY(20px);
      opacity: 0;
      transition: var(--transition);
    }

    .sidebar.visible {
      transform: translateY(0);
      opacity: 1;
    }

    .sidebar-title {
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: var(--primary-light);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .homework-search {
      margin-bottom: 20px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      cursor: pointer;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    /* === CARDS === */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      margin-top: 40px;
    }

    .card {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      overflow: hidden;
      transition: var(--transition);
      transform: translateY(0);
      box-shadow: var(--shadow);
      position: relative;
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(61, 90, 254, 0.3);
    }

    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(61, 90, 254, 0.05), transparent);
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .card:hover::before {
      opacity: 1;
    }

    .card-img {
      height: 180px;
      width: 100%;
      object-fit: cover;
    }

    .card-body {
      padding: 20px;
    }

    .card-title {
      font-size: 1.3rem;
      margin-bottom: 10px;
      color: var(--primary-light);
    }

    .card-subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .card-text {
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* === TIMELINE === */
    .timeline {
      position: relative;
      max-width: 800px;
      margin: 40px auto;
    }

    .timeline::after {
      content: '';
      position: absolute;
      width: 4px;
      background: var(--primary-light);
      top: 0;
      bottom: 0;
      left: 50%;
      margin-left: -2px;
      border-radius: 2px;
    }

    .timeline-item {
      padding: 10px 40px;
      position: relative;
      width: 50%;
      opacity: 0;
      transform: translateX(-30px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .timeline-item.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .timeline-item:nth-child(even) {
      left: 50%;
      transform: translateX(30px);
    }

    .timeline-item:nth-child(even).visible {
      transform: translateX(0);
    }

    .timeline-item::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      top: 15px;
      z-index: 1;
    }

    .timeline-item:nth-child(even)::after {
      right: -10px;
    }

    .timeline-item:nth-child(odd)::after {
      left: -10px;
    }

    .timeline-content {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 10px;
      box-shadow: var(--shadow);
    }

    .timeline-date {
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 10px;
    }

    /* === TIMETABLE === */
    .timetable {
      overflow-x: auto;
      margin-top: 40px;
    }

    .timetable-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }

    .timetable-table th, .timetable-table td {
      padding: 15px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .timetable-table th {
      background: rgba(61, 90, 254, 0.1);
      color: var(--primary-light);
      font-weight: 600;
    }

    .timetable-table tr:nth-child(even) {
      background: rgba(255, 255, 255, 0.03);
    }

    .subject {
      font-weight: 600;
      color: var(--accent);
    }

    /* === GALLERY === */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
      margin-top: 40px;
    }

    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
      cursor: pointer;
      transform: scale(1);
      transition: var(--transition);
    }

    .gallery-item:hover {
      transform: scale(1.03);
    }

    .gallery-item img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: var(--transition);
    }

    .gallery-item:hover img {
      transform: scale(1.1);
    }

    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
    }

    .lightbox.visible {
      opacity: 1;
      visibility: visible;
    }

    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }

    .lightbox-img {
      max-width: 100%;
      max-height: 90vh;
      border-radius: 5px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.5rem;
    }

    .lightbox-nav.prev {
      left: 20px;
    }

    .lightbox-nav.next {
      right: 20px;
    }

    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.2rem;
    }

    /* === ACCORDION === */
    .accordion {
      max-width: 800px;
      margin: 40px auto;
    }

    .accordion-item {
      margin-bottom: 15px;
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
    }

    .accordion-header {
      padding: 20px;
      background: rgba(255, 255, 255, 0.03);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition);
    }

    .accordion-header:hover {
      background: rgba(61, 90, 254, 0.1);
    }

    .accordion-header.active {
      background: rgba(61, 90, 254, 0.15);
      color: var(--primary-light);
    }

    .accordion-body {
      padding: 0 20px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .accordion-body.open {
      max-height: 500px;
      padding: 20px;
    }

    /* === COUNTERS === */
    .counters {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .counter-item {
      text-align: center;
    }

    .counter {
      font-size: 3rem;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 10px;
    }

    /* === CONTACT FORM === */
    .contact-form {
      max-width: 600px;
      margin: 40px auto;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group.full {
      grid-column: 1 / -1;
    }

    .submit-btn {
      background: var(--accent);
      color: white;
      padding: 12px 30px;
      border-radius: 50px;
      font-weight: 600;
      display: block;
      margin: 0 auto;
      box-shadow: 0 0 15px rgba(231, 76, 60, 0.4);
      transition: var(--transition);
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(231, 76, 60, 0.5);
    }

    /* === HOVER EFFECTS === */
    .parallax-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }

    .parallax-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      background: transparent;
    }

    .layer-1 {
      background: radial-gradient(circle at 70% 30%, rgba(61, 90, 254, 0.05), transparent 40%);
    }

    .layer-2 {
      background: radial-gradient(circle at 30% 70%, rgba(231, 76, 60, 0.05), transparent 40%);
    }

    /* === ANIMATIONS === */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .float {
      animation: float 6s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(61, 90, 254, 0.4); }
      50% { box-shadow: 0 0 0 10px rgba(61, 90, 254, 0); }
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes confetti {
      0% { transform: translateY(0) rotate(0); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 20px;
      background: var(--accent);
      opacity: 0;
      z-index: 4000;
    }

    /* === RESPONSIVE === */
    @media (max-width: 992px) {
      .nav-links {
        display: none;
      }

      .menu-toggle {
        display: flex;
      }

      .sidebar {
        right: 20px;
        width: 250px;
      }
    }

    @media (max-width: 768px) {
      .section-title {
        font-size: 2rem;
      }

      .header-content {
        flex-direction: column;
        text-align: center;
      }

      .call-btn {
        width: 100%;
        justify-content: center;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .timeline::after {
        left: 31px;
      }

      .timeline-item {
        width: 100%;
        padding-left: 70px;
        padding-right: 25px;
        left: 0 !important;
        transform: none !important;
      }

      .timeline-item:nth-child(even)::after,
      .timeline-item::after {
        left: 15px;
      }

      .counters {
        gap: 20px;
      }

      .counter {
        font-size: 2.5rem;
      }

      .contact-form {
        margin: 20px;
        padding: 20px;
      }
    }

    @media (max-width: 576px) {
      .gate-modal {
        width: 95%;
        padding: 30px 20px;
      }

      .gate-title {
        font-size: 1.8rem;
      }

      .sidebar {
        width: 90%;
        max-width: 300px;
        right: 50%;
        transform: translateX(50%);
      }

      .lightbox-content {
        max-width: 95%;
      }
    }

    /* === PRINT STYLES === */
    @media print {
      header, nav, .sidebar, .gate-overlay, .lightbox, .btn, .no-print {
        display: none !important;
      }

      body, .container {
        background: white !important;
        color: black !important;
      }

      section {
        opacity: 1 !important;
        transform: none !important;
        padding: 20px 0;
      }

      .card, .card:hover {
        transform: none !important;
        box-shadow: 0 1px 3px rgba(0,0,0,0.12) !important;
      }

      img {
        max-height: 200px;
      }
    }
  </style>
</head>
<body>
  <!-- Parallax Background Layers -->
  <div class="parallax-container">
    <div class="parallax-layer layer-1"></div>
    <div class="parallax-layer layer-2"></div>
  </div>

  <!-- Gate Modal -->
  <div class="gate-overlay" id="gateOverlay">
    <div class="gate-modal">
      <h2 class="gate-title">Welcome to Milli Karwaan Public School</h2>
      <p style="text-align: center; margin-bottom: 20px; color: var(--text-secondary);">Please enter your details to access your personalized portal</p>
      <form id="gateForm">
        <div class="form-group">
          <label for="studentName">Student Name</label>
          <input type="text" id="studentName" required />
          <div class="error" id="nameError">Please enter your name</div>
        </div>
        <div class="form-group">
          <label for="studentClass">Class</label>
          <select id="studentClass" required>
            <option value="">Select your class</option>
            <option value="1">Class 1</option>
            <option value="2">Class 2</option>
            <option value="3">Class 3</option>
            <option value="4">Class 4</option>
            <option value="5">Class 5</option>
            <option value="6">Class 6</option>
            <option value="7">Class 7</option>
            <option value="8">Class 8</option>
            <option value="9">Class 9</option>
            <option value="10">Class 10</option>
            <option value="11">Class 11</option>
            <option value="12">Class 12</option>
          </select>
          <div class="error" id="classError">Please select your class</div>
        </div>
        <div class="form-group">
          <label for="parentName">Parent/Guardian Name</label>
          <input type="text" id="parentName" required />
          <div class="error" id="parentError">Please enter parent name</div>
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;">Enter Portal</button>
      </form>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="header-content">
      <img src="https://i.postimg.cc/ryGx49TB/erasebg-transformed.png" alt="Milli Karwaan Public School Logo" class="logo" />
      <div class="school-info">
        <h1 class="school-name">Milli Karwaan Public School Balrampur</h1>
        <p class="school-address">Boluha Police Chowki Balrampur (U.P.)</p>
      </div>
    </div>
    <a href="tel:9758919151" class="call-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
        <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.48 1.454.23 3.184 1.638 4.023l1.502 1.012c.382.259.81.41.907.41.199 0 .627-.15.907-.41l1.502-1.012c1.408-.84 2.118-2.57 1.638-4.023l-1.034-1.034c-.372-.372-.907-.48-1.31-.202L4.654 2.3a.678.678 0 0 0-.202.907l1.03.907c.48.444.65.9.65 1.31 0 .41-.17.866-.65 1.31L4.1 6.728c-.372.372-.907.48-1.31.202L1.758 5.898c-.48-.444-.65-.9-.65-1.31 0-.41.17-.866.65-1.31L3.654 1.328z"/>
        <path fill-rule="evenodd" d="M12.5 1a.5.5 0 0 1 .5.5V3h1.5a.5.5 0 0 1 0 1H13v1.5a.5.5 0 0 1-1 0V4h-1.5a.5.5 0 0 1 0-1H12V1.5a.5.5 0 0 1 .5-.5z"/>
        <path d="M11 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
        <path d="M11 8.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
        <path d="M11 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
        <path d="M5.5 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
        <path d="M5.5 8.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
        <path d="M5.5 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
      </svg>
      Call: 9758919151
    </a>
  </header>

  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <ul class="nav-links">
        <li><a href="#teachers">Teachers</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="#notices">Notices</a></li>
        <li><a href="#timetable">Timetable</a></li>
        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#achievements">Achievements</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="admin.html" target="_blank">Admin Login</a></li>
        <li><a href="#" id="exportData">Export Data</a></li>
        <li><a href="#" id="importData">Import Data</a></li>
        <li><a href="#" id="downloadSnapshot">Download Snapshot</a></li>
      </ul>
      <div class="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <h3 class="sidebar-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path d="M1.5 0A1.5 1.5 0 0 0 0 1.5v7a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5V7a.5.5 0 0 1 1 0v2.5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5V7a.5.5 0 0 1 1 0v2.5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 14.5 0h-13zm0 1h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/>
        <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-1zm0 4a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-1zm0 4a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-1z"/>
      </svg>
      Homework Quick Search
    </h3>
    <div class="homework-search">
      <input type="text" id="homeworkSearch" placeholder="Search homework..." />
    </div>
    
    <h3 class="sidebar-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0 2.42 1.72 4.44 4.005 4.901a1 1 0 1 0 1.99 0C11.28 10.44 13 8.42 13 6c0 .88.32 4.2 1.22 6z"/>
      </svg>
      Quick Stats
    </h3>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-value" id="homeworkCount">0</div>
        <div class="stat-label">Assignments</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="noticeCount">0</div>
        <div class="stat-label">Notices</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="eventCount">0</div>
        <div class="stat-label">Events</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="teacherCount">0</div>
        <div class="stat-label">Teachers</div>
      </div>
    </div>

    <h3 class="sidebar-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.343 4.343a.5.5 0 0 1-.707 0L2.222 2.929a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707z"/>
      </svg>
      Theme
    </h3>
    <div class="theme-toggle" id="themeToggle">
      <span>Dark Mode</span>
      <div class="toggle-icon">ðŸŒ™</div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="container">
    <!-- Teachers Section -->
    <section id="teachers">
      <h2 class="section-title glow-text">Our Faculty</h2>
      <div class="cards-grid" id="teachersGrid">
        <!-- Teachers will be populated by JS -->
      </div>
    </section>

    <!-- Events Section -->
    <section id="events">
      <h2 class="section-title glow-text">Upcoming Events</h2>
      <div class="timeline" id="eventsTimeline">
        <!-- Events will be populated by JS -->
      </div>
    </section>

    <!-- Notices Section -->
    <section id="notices">
      <h2 class="section-title glow-text">Important Notices</h2>
      <div class="cards-grid" id="noticesGrid">
        <!-- Notices will be populated by JS -->
      </div>
    </section>

    <!-- Timetable Section -->
    <section id="timetable">
      <h2 class="section-title glow-text">Weekly Timetable</h2>
      <div class="timetable">
        <table class="timetable-table" id="timetableTable">
          <thead>
            <tr>
              <th>Time</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
          </thead>
          <tbody>
            <!-- Timetable will be populated by JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery">
      <h2 class="section-title glow-text">School Gallery</h2>
      <div class="gallery-grid" id="galleryGrid">
        <!-- Gallery items will be populated by JS -->
      </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq">
      <h2 class="section-title glow-text">Frequently Asked Questions</h2>
      <div class="accordion" id="faqAccordion">
        <!-- FAQ items will be populated by JS -->
      </div>
    </section>

    <!-- Achievements Section -->
    <section id="achievements">
      <h2 class="section-title glow-text">Our Achievements</h2>
      <div class="counters">
        <div class="counter-item">
          <div class="counter" id="studentCounter">0</div>
          <div>Students</div>
        </div>
        <div class="counter-item">
          <div class="counter" id="passingCounter">0</div>
          <div>100% Passing</div>
        </div>
        <div class="counter-item">
          <div class="counter" id="awardCounter">0</div>
          <div>Awards Won</div>
        </div>
        <div class="counter-item">
          <div class="counter" id="yearCounter">0</div>
          <div>Years of Excellence</div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <h2 class="section-title glow-text">Contact Us</h2>
      <div class="contact-form">
        <form id="contactForm">
          <div class="form-row">
            <div class="form-group">
              <label for="contactName">Name</label>
              <input type="text" id="contactName" required />
            </div>
            <div class="form-group">
              <label for="contactEmail">Email</label>
              <input type="email" id="contactEmail" required />
            </div>
          </div>
          <div class="form-group full">
            <label for="contactSubject">Subject</label>
            <input type="text" id="contactSubject" required />
          </div>
          <div class="form-group full">
            <label for="contactMessage">Message</label>
            <textarea id="contactMessage" rows="5" required></textarea>
          </div>
          <button type="submit" class="submit-btn">Send Message</button>
        </form>
      </div>
    </section>

    <!-- About Section -->
    <section id="about">
      <h2 class="section-title glow-text">About Us</h2>
      <div style="max-width: 800px; margin: 0 auto; text-align: center; color: var(--text-secondary); line-height: 1.8;">
        <p>Milli Karwaan Public School Balrampur is committed to providing quality education with a focus on holistic development. Established with the vision of creating responsible citizens, our school combines modern teaching methodologies with traditional values.</p>
        <br>
        <p>Our curriculum is designed to foster critical thinking, creativity, and character development. We believe in nurturing each student's unique talents and preparing them for the challenges of the 21st century.</p>
        <br>
        <p>With dedicated faculty, state-of-the-art facilities, and a nurturing environment, we strive to create an atmosphere where every child can thrive academically, socially, and emotionally.</p>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <div class="lightbox-content">
      <img src="" alt="" class="lightbox-img" id="lightboxImg" />
      <div class="lightbox-nav prev" id="lightboxPrev">â€¹</div>
      <div class="lightbox-nav next" id="lightboxNext">â€º</div>
      <div class="lightbox-close" id="lightboxClose">Ã—</div>
    </div>
  </div>

  <!-- Confetti -->
  <div id="confetti-container"></div>

  <script>
    // Main App Object
    const MKPS = {
      student: null,
      homework: {},
      notices: [],
      events: [],
      teachers: [],
      gallery: [],
      timetable: [],
      messages: [],
      faq: [],
      initialized: false,

      init() {
        this.checkLocalStorage();
        this.bindEvents();
        this.loadStudent();
        this.seedData();
        this.renderAll();
        this.updateStats();
        this.setupIntersectionObserver();
        this.setupParallax();
        this.startConfetti();
      },

      checkLocalStorage() {
        try {
          if (typeof localStorage === 'undefined') {
            alert('Local storage is not available. Some features may not work properly.');
            return false;
          }
          return true;
        } catch (e) {
          alert('Local storage is disabled. Please enable it to use all features.');
          return false;
        }
      },

      bindEvents() {
        // Gate form submission
        document.getElementById('gateForm').addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleGateSubmit();
        });

        // Navigation
        document.querySelectorAll('nav a').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = e.target.getAttribute('href');
            if (target && target.startsWith('#')) {
              document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
            }
          });
        });

        // Menu toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        menuToggle.addEventListener('click', () => {
          navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        });

        // Theme toggle
        document.getElementById('themeToggle').addEventListener('click', () => {
          this.toggleTheme();
        });

        // Search homework
        document.getElementById('homeworkSearch').addEventListener('input', (e) => {
          this.searchHomework(e.target.value);
        });

        // Export/Import
        document.getElementById('exportData').addEventListener('click', () => {
          this.exportData();
        });

        document.getElementById('importData').addEventListener('click', () => {
          this.importData();
        });

        document.getElementById('downloadSnapshot').addEventListener('click', () => {
          this.downloadSnapshot();
        });

        // Contact form
        document.getElementById('contactForm').addEventListener('submit', (e) => {
          e.preventDefault();
          this.handleContactSubmit();
        });

        // Lightbox
        this.setupLightbox();

        // Storage event listener
        window.addEventListener('storage', (e) => {
          if (e.key === 'mkps_update') {
            this.renderAll();
            this.updateStats();
          }
        });

        // Prevent back button after gate
        window.history.pushState(null, null, window.location.href);
        window.onpopstate = function() {
          window.history.go(1);
        };
      },

      handleGateSubmit() {
        const name = document.getElementById('studentName').value.trim();
        const classNum = document.getElementById('studentClass').value;
        const parent = document.getElementById('parentName').value.trim();

        let valid = true;

        if (!name) {
          document.getElementById('nameError').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('nameError').style.display = 'none';
        }

        if (!classNum) {
          document.getElementById('classError').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('classError').style.display = 'none';
        }

        if (!parent) {
          document.getElementById('parentError').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('parentError').style.display = 'none';
        }

        if (valid) {
          this.student = { name, class: classNum, parent };
          localStorage.setItem('mkps_student', JSON.stringify(this.student));
          localStorage.setItem('mkps_update', Date.now().toString());
          document.getElementById('gateOverlay').classList.add('hidden');
          this.renderAll();
          this.updateStats();
        }
      },

      loadStudent() {
        const saved = localStorage.getItem('mkps_student');
        if (saved) {
          this.student = JSON.parse(saved);
          document.getElementById('gateOverlay').classList.add('hidden');
        }
      },

      seedData() {
        // Teachers
        if (!localStorage.getItem('mkps_teachers')) {
          this.teachers = [
            { name: 'Arif Khan', subject: 'Mathematics', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: '10 years experience in Mathematics education' },
            { name: 'Shruti Verma', subject: 'Science', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: 'Specializes in Physics and Chemistry' },
            { name: 'Prakash Singh', subject: 'English', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: 'Literature and Communication expert' },
            { name: 'Riya Thomas', subject: 'Computer Science', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: 'Programming and Web Development' },
            { name: 'Neeraj Gupta', subject: 'Social Studies', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: 'History and Geography specialist' },
            { name: 'Alka Sharma', subject: 'Hindi', image: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', bio: 'Hindi Literature and Grammar' }
          ];
          localStorage.setItem('mkps_teachers', JSON.stringify(this.teachers));
        } else {
          this.teachers = JSON.parse(localStorage.getItem('mkps_teachers'));
        }

        // Notices
        if (!localStorage.getItem('mkps_notices')) {
          this.notices = [
            { title: 'Summer Vacation', content: 'Summer vacation will start from June 15th and end on July 31st. Classes will resume on August 1st.', date: '2023-05-10', priority: 'high' },
            { title: 'Parent-Teacher Meeting', content: 'Scheduled for all classes on June 10th at 3:00 PM in the school auditorium. Please be punctual.', date: '2023-06-01', priority: 'medium' },
            { title: 'Science Exhibition', content: 'Annual Science Exhibition will be held on July 5th. Students of classes 6-12 are required to prepare projects.', date: '2023-06-15', priority: 'high' },
            { title: 'Fee Payment', content: 'First term fees must be paid by May 31st. Late payments will incur a penalty.', date: '2023-05-15', priority: 'high' },
            { title: 'Sports Day', content: 'Annual Sports Day is scheduled for August 15th. All students must participate in at least one event.', date: '2023-07-01', priority: 'medium' }
          ];
          localStorage.setItem('mkps_notices', JSON.stringify(this.notices));
        } else {
          this.notices = JSON.parse(localStorage.getItem('mkps_notices'));
        }

        // Events
        if (!localStorage.getItem('mkps_events')) {
          this.events = [
            { title: 'Annual Day Celebration', date: '2023-08-15', time: '10:00 AM', venue: 'School Grounds', description: 'Cultural program with dance, music, and drama performances by students.' },
            { title: 'Science Fair', date: '2023-07-05', time: '9:00 AM', venue: 'Science Lab', description: 'Students will present their science projects and experiments.' },
            { title: 'Mathematics Olympiad', date: '2023-06-20', time: '11:00 AM', venue: 'Classroom 5', description: 'Inter-class mathematics competition for students of classes 6-12.' },
            { title: 'Art Exhibition', date: '2023-07-25', time: '2:00 PM', venue: 'Art Room', description: 'Display of student artwork including paintings, sculptures, and crafts.' },
            { title: 'Sports Tournament', date: '2023-08-10', time: '9:00 AM', venue: 'Sports Field', description: 'Inter-house sports competition with various track and field events.' }
          ];
          localStorage.setItem('mkps_events', JSON.stringify(this.events));
        } else {
          this.events = JSON.parse(localStorage.getItem('mkps_events'));
        }

        // Gallery
        if (!localStorage.getItem('mkps_gallery')) {
          this.gallery = [
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Annual Day Celebration' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Science Fair Winners' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Sports Day Activities' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Art Exhibition' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Classroom Learning' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Teacher Training' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'School Building' },
            { src: 'https://i.postimg.cc/ryGx49TB/erasebg-transformed.png', caption: 'Library Session' }
          ];
          localStorage.setItem('mkps_gallery', JSON.stringify(this.gallery));
        } else {
          this.gallery = JSON.parse(localStorage.getItem('mkps_gallery'));
        }

        // Timetable
        if (!localStorage.getItem('mkps_timetable')) {
          this.timetable = [
            { time: '9:00-10:00', mon: 'Math', tue: 'Science', wed: 'English', thu: 'Hindi', fri: 'Social', sat: 'PE' },
            { time: '10:00-11:00', mon: 'Science', tue: 'Math', wed: 'Hindi', thu: 'English', fri: 'Computer', sat: 'Arts' },
            { time: '11:00-12:00', mon: 'English', tue: 'Hindi', wed: 'Math', thu: 'Science', fri: 'PE', sat: 'Music' },
            { time: '12:00-1:00', mon: 'Lunch', tue: 'Lunch', wed: 'Lunch', thu: 'Lunch', fri: 'Lunch', sat: 'Lunch' },
            { time: '1:00-2:00', mon: 'Social', tue: 'Computer', wed: 'Science', thu: 'Math', fri: 'Hindi', sat: 'Dance' },
            { time: '2:00-3:00', mon: 'Hindi', tue: 'English', wed: 'Social', thu: 'Computer', fri: 'Math', sat: 'Yoga' }
          ];
          localStorage.setItem('mkps_timetable', JSON.stringify(this.timetable));
        } else {
          this.timetable = JSON.parse(localStorage.getItem('mkps_timetable'));
        }

        // FAQ
        if (!localStorage.getItem('mkps_faq')) {
          this.faq = [
            { question: 'What are the school hours?', answer: 'School operates from 9:00 AM to 3:00 PM, Monday through Saturday.' },
            { question: 'What is the admission process?', answer: 'Admission forms are available at the school office. Required documents include birth certificate, previous school records, and passport photos.' },
            { question: 'Are there any transportation facilities?', answer: 'Yes, we provide bus services covering major areas of Balrampur. Routes and schedules are available at the administration office.' },
            { question: 'What are the fee structures?', answer: 'Class 1-5: â‚¹6,000/year, Class 6-8: â‚¹8,000/year, Class 9-10: â‚¹10,000/year, Class 11-12: â‚¹12,000/year.' },
            { question: 'Is there a uniform policy?', answer: 'Yes, all students are required to wear the prescribed school uniform during school hours and official events.' },
            { question: 'Are there extracurricular activities?', answer: 'We offer various extracurricular activities including sports, music, dance, art, and science clubs.' }
          ];
          localStorage.setItem('mkps_faq', JSON.stringify(this.faq));
        } else {
          this.faq = JSON.parse(localStorage.getItem('mkps_faq'));
        }

        // Homework - class specific
        if (!localStorage.getItem('mkps_homework')) {
          this.homework = {
            '1': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete page 25-27 in textbook. Practice addition and subtraction problems.' },
              { subject: 'English', date: '2023-05-16', teacher: 'Prakash Singh', instructions: 'Read chapter 3 and write 5 sentences about the story.' }
            ],
            '2': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve multiplication problems on page 45. Complete the word problems.' },
              { subject: 'Science', date: '2023-05-17', teacher: 'Shruti Verma', instructions: 'Draw and label the parts of a plant. Write one sentence about each part.' }
            ],
            '3': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete the division exercises on page 67. Solve the word problems.' },
              { subject: 'Hindi', date: '2023-05-16', teacher: 'Alka Sharma', instructions: 'Write a short paragraph about your family in Hindi.' }
            ],
            '4': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve the geometry problems on page 89. Calculate area and perimeter.' },
              { subject: 'Social Studies', date: '2023-05-17', teacher: 'Neeraj Gupta', instructions: 'Research and write about the major rivers of India.' }
            ],
            '5': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete the fractions chapter exercises. Solve the word problems.' },
              { subject: 'Science', date: '2023-05-18', teacher: 'Shruti Verma', instructions: 'Prepare a project on the water cycle. Include diagrams and explanations.' }
            ],
            '6': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve the algebra problems on page 123. Complete the exercise on linear equations.' },
              { subject: 'Computer Science', date: '2023-05-16', teacher: 'Riya Thomas', instructions: 'Create a presentation on computer hardware components.' }
            ],
            '7': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete the geometry proofs on page 156. Solve the trigonometry problems.' },
              { subject: 'Science', date: '2023-05-17', teacher: 'Shruti Verma', instructions: 'Conduct an experiment on chemical reactions and write a lab report.' }
            ],
            '8': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve the quadratic equations on page 189. Complete the word problems.' },
              { subject: 'English', date: '2023-05-18', teacher: 'Prakash Singh', instructions: 'Write an essay on "The Importance of Education" (500 words).' }
            ],
            '9': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete the calculus problems on derivatives. Solve the application problems.' },
              { subject: 'Science', date: '2023-05-16', teacher: 'Shruti Verma', instructions: 'Prepare for the physics practical exam. Review all experiments.' }
            ],
            '10': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve the trigonometry problems on identities. Complete the exercise on heights and distances.' },
              { subject: 'Social Studies', date: '2023-05-17', teacher: 'Neeraj Gupta', instructions: 'Research and write about the Indian Constitution. Focus on fundamental rights.' }
            ],
            '11': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Complete the calculus problems on integration. Solve the application problems.' },
              { subject: 'Computer Science', date: '2023-05-16', teacher: 'Riya Thomas', instructions: 'Write a program in Python to calculate factorial using recursion.' }
            ],
            '12': [
              { subject: 'Mathematics', date: '2023-05-15', teacher: 'Arif Khan', instructions: 'Solve the probability problems on conditional probability. Complete the exercise on Bayes theorem.' },
              { subject: 'Science', date: '2023-05-18', teacher: 'Shruti Verma', instructions: 'Prepare for the board exam practicals. Review all physics experiments.' }
            ]
          };
          localStorage.setItem('mkps_homework', JSON.stringify(this.homework));
        } else {
          this.homework = JSON.parse(localStorage.getItem('mkps_homework'));
        }

        // Messages
        if (!localStorage.getItem('mkps_messages')) {
          this.messages = [];
          localStorage.setItem('mkps_messages', JSON.stringify(this.messages));
        } else {
          this.messages = JSON.parse(localStorage.getItem('mkps_messages'));
        }
      },

      renderAll() {
        this.renderTeachers();
        this.renderEvents();
        this.renderNotices();
        this.renderTimetable();
        this.renderGallery();
        this.renderFAQ();
        this.renderHomework();
        this.animateCounters();
      },

      renderTeachers() {
        const container = document.getElementById('teachersGrid');
        container.innerHTML = '';
        this.teachers.forEach(teacher => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <img src="${teacher.image}" alt="${teacher.name}" class="card-img" />
            <div class="card-body">
              <h3 class="card-title">${teacher.name}</h3>
              <p class="card-subtitle">${teacher.subject}</p>
              <p class="card-text">${teacher.bio}</p>
            </div>
          `;
          container.appendChild(card);
        });
      },

      renderEvents() {
        const container = document.getElementById('eventsTimeline');
        container.innerHTML = '';
        this.events.forEach((event, index) => {
          const item = document.createElement('div');
          item.className = 'timeline-item';
          item.innerHTML = `
            <div class="timeline-content">
              <div class="timeline-date">${event.date} | ${event.time}</div>
              <h3>${event.title}</h3>
              <p>${event.description}</p>
              <p><strong>Venue:</strong> ${event.venue}</p>
            </div>
          `;
          container.appendChild(item);
        });
      },

      renderNotices() {
        const container = document.getElementById('noticesGrid');
        container.innerHTML = '';
        this.notices.forEach(notice => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-body">
              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                <h3 class="card-title">${notice.title}</h3>
                <span style="background: ${notice.priority === 'high' ? '#e74c3c' : notice.priority === 'medium' ? '#f39c12' : '#3498db'}; 
                             color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;">
                  ${notice.priority.toUpperCase()}
                </span>
              </div>
              <p class="card-text">${notice.content}</p>
              <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">Posted: ${notice.date}</p>
            </div>
          `;
          container.appendChild(card);
        });
      },

      renderTimetable() {
        const tbody = document.getElementById('timetableTable').querySelector('tbody');
        tbody.innerHTML = '';
        this.timetable.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.time}</td>
            <td class="subject">${row.mon}</td>
            <td class="subject">${row.tue}</td>
            <td class="subject">${row.wed}</td>
            <td class="subject">${row.thu}</td>
            <td class="subject">${row.fri}</td>
            <td class="subject">${row.sat}</td>
          `;
          tbody.appendChild(tr);
        });
      },

      renderGallery() {
        const container = document.getElementById('galleryGrid');
        container.innerHTML = '';
        this.gallery.forEach((item, index) => {
          const galleryItem = document.createElement('div');
          galleryItem.className = 'gallery-item';
          galleryItem.innerHTML = `<img src="${item.src}" alt="${item.caption}" data-index="${index}" />`;
          container.appendChild(galleryItem);
        });

        // Add click event to gallery items
        document.querySelectorAll('.gallery-item img').forEach(img => {
          img.addEventListener('click', () => {
            this.openLightbox(parseInt(img.getAttribute('data-index')));
          });
        });
      },

      renderFAQ() {
        const container = document.getElementById('faqAccordion');
        container.innerHTML = '';
        this.faq.forEach((item, index) => {
          const faqItem = document.createElement('div');
          faqItem.className = 'accordion-item';
          faqItem.innerHTML = `
            <div class="accordion-header" id="faq-${index}">
              <span>${item.question}</span>
              <span>+</span>
            </div>
            <div class="accordion-body">
              <p>${item.answer}</p>
            </div>
          `;
          container.appendChild(faqItem);

          // Add event listener
          const header = faqItem.querySelector('.accordion-header');
          header.addEventListener('click', () => {
            header.classList.toggle('active');
            const body = header.nextElementSibling;
            body.classList.toggle('open');
            header.querySelector('span:last-child').textContent = body.classList.contains('open') ? 'âˆ’' : '+';
          });
        });
      },

      renderHomework() {
        // This is handled by searchHomework function
        this.searchHomework('');
      },

      searchHomework(query) {
        const container = document.getElementById('noticesGrid'); // Reusing notices grid for homework
        if (!this.student) return;

        const classHomework = this.homework[this.student.class] || [];
        const filtered = classHomework.filter(hw => 
          hw.subject.toLowerCase().includes(query.toLowerCase()) ||
          hw.instructions.toLowerCase().includes(query.toLowerCase()) ||
          hw.teacher.toLowerCase().includes(query.toLowerCase())
        );

        // Create homework cards
        const homeworkCards = filtered.map(hw => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-body">
              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                <h3 class="card-title">${hw.subject}</h3>
                <span style="background: var(--accent); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;">
                  Class ${this.student.class}
                </span>
              </div>
              <p class="card-subtitle">Teacher: ${hw.teacher}</p>
              <p class="card-subtitle">Due: ${hw.date}</p>
              <p class="card-text">${hw.instructions}</p>
            </div>
          `;
          return card;
        });

        // Replace existing content with homework
        container.innerHTML = '';
        homeworkCards.forEach(card => container.appendChild(card));
      },

      animateCounters() {
        const counters = [
          { element: document.getElementById('studentCounter'), target: 1250 },
          { element: document.getElementById('passingCounter'), target: 100 },
          { element: document.getElementById('awardCounter'), target: 89 },
          { element: document.getElementById('yearCounter'), target: 15 }
        ];

        counters.forEach(counter => {
          const animate = () => {
            const target = +counter.target;
            const count = +counter.element.getAttribute('data-count') || 0;
            const increment = target / 50;

            if (count < target) {
              counter.element.setAttribute('data-count', count + increment);
              counter.element.innerText = Math.ceil(count + increment);
              requestAnimationFrame(animate);
            } else {
              counter.element.innerText = target;
              if (target === 100) {
                this.launchConfetti();
              }
            }
          };
          animate();
        });
      },

      updateStats() {
        if (!this.student) return;

        const classHomework = this.homework[this.student.class] || [];
        document.getElementById('homeworkCount').textContent = classHomework.length;
        document.getElementById('noticeCount').textContent = this.notices.length;
        document.getElementById('eventCount').textContent = this.events.length;
        document.getElementById('teacherCount').textContent = this.teachers.length;

        // Update sidebar visibility
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.add('visible');
      },

      setupIntersectionObserver() {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
            }
          });
        }, { threshold: 0.1 });

        document.querySelectorAll('section').forEach(section => {
          observer.observe(section);
        });
      },

      setupParallax() {
        document.addEventListener('mousemove', (e) => {
          const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
          const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
          
          document.querySelector('.layer-1').style.transform = `translate(${xAxis}px, ${yAxis}px)`;
          document.querySelector('.layer-2').style.transform = `translate(${-xAxis}px, ${-yAxis}px)`;
        });
      },

      setupLightbox() {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightboxImg');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        
        let currentIndex = 0;

        this.openLightbox = function(index) {
          currentIndex = index;
          lightboxImg.src = this.gallery[currentIndex].src;
          lightboxImg.alt = this.gallery[currentIndex].caption;
          lightbox.classList.add('visible');
          document.body.style.overflow = 'hidden';
        };

        lightboxClose.addEventListener('click', () => {
          lightbox.classList.remove('visible');
          document.body.style.overflow = 'auto';
        });

        lightboxPrev.addEventListener('click', () => {
          currentIndex = (currentIndex - 1 + this.gallery.length) % this.gallery.length;
          lightboxImg.src = this.gallery[currentIndex].src;
          lightboxImg.alt = this.gallery[currentIndex].caption;
        });

        lightboxNext.addEventListener('click', () => {
          currentIndex = (currentIndex + 1) % this.gallery.length;
          lightboxImg.src = this.gallery[currentIndex].src;
          lightboxImg.alt = this.gallery[currentIndex].caption;
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
          if (!lightbox.classList.contains('visible')) return;

          if (e.key === 'Escape') {
            lightbox.classList.remove('visible');
            document.body.style.overflow = 'auto';
          } else if (e.key === 'ArrowLeft') {
            currentIndex = (currentIndex - 1 + this.gallery.length) % this.gallery.length;
            lightboxImg.src = this.gallery[currentIndex].src;
            lightboxImg.alt = this.gallery[currentIndex].caption;
          } else if (e.key === 'ArrowRight') {
            currentIndex = (currentIndex + 1) % this.gallery.length;
            lightboxImg.src = this.gallery[currentIndex].src;
            lightboxImg.alt = this.gallery[currentIndex].caption;
          }
        });
      },

      toggleTheme() {
        document.body.classList.toggle('dark-theme');
        const isDark = document.body.classList.contains('dark-theme');
        localStorage.setItem('mkps_theme', isDark ? 'dark' : 'light');
        
        const toggle = document.getElementById('themeToggle');
        const icon = toggle.querySelector('.toggle-icon');
        const text = toggle.querySelector('span');
        
        if (isDark) {
          text.textContent = 'Light Mode';
          icon.textContent = 'â˜€ï¸';
        } else {
          text.textContent = 'Dark Mode';
          icon.textContent = 'ðŸŒ™';
        }
      },

      loadTheme() {
        const savedTheme = localStorage.getItem('mkps_theme');
        if (savedTheme === 'dark') {
          document.body.classList.add('dark-theme');
          const toggle = document.getElementById('themeToggle');
          const icon = toggle.querySelector('.toggle-icon');
          const text = toggle.querySelector('span');
          text.textContent = 'Light Mode';
          icon.textContent = 'â˜€ï¸';
        }
      },

      handleContactSubmit() {
        const name = document.getElementById('contactName').value.trim();
        const email = document.getElementById('contactEmail').value.trim();
        const subject = document.getElementById('contactSubject').value.trim();
        const message = document.getElementById('contactMessage').value.trim();

        if (name && email && subject && message) {
          const msg = { name, email, subject, message, date: new Date().toISOString().split('T')[0] };
          this.messages.push(msg);
          localStorage.setItem('mkps_messages', JSON.stringify(this.messages));
          localStorage.setItem('mkps_update', Date.now().toString());
          
          alert('Thank you for your message! We will get back to you soon.');
          document.getElementById('contactForm').reset();
        } else {
          alert('Please fill in all fields.');
        }
      },

      exportData() {
        try {
          const data = {};
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key.startsWith('mkps_')) {
              data[key] = localStorage.getItem(key);
            }
          }
          
          const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `mkps_data_backup_${new Date().toISOString().split('T')[0]}.json`;
          a.click();
          URL.revokeObjectURL(url);
        } catch (e) {
          alert('Error exporting data: ' + e.message);
        }
      },

      importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.onchange = (e) => {
          const file = e.target.files[0];
          const reader = new FileReader();
          reader.onload = (event) => {
            try {
              const data = JSON.parse(event.target.result);
              // Validate data structure
              if (typeof data === 'object' && data !== null) {
                // Clear existing mkps data
                for (let i = 0; i < localStorage.length; i++) {
                  const key = localStorage.key(i);
                  if (key.startsWith('mkps_')) {
                    localStorage.removeItem(key);
                  }
                }
                
                // Import new data
                Object.keys(data).forEach(key => {
                  if (key.startsWith('mkps_')) {
                    localStorage.setItem(key, data[key]);
                  }
                });
                
                localStorage.setItem('mkps_update', Date.now().toString());
                alert('Data imported successfully! Page will reload.');
                location.reload();
              } else {
                throw new Error('Invalid data format');
              }
            } catch (e) {
              alert('Error importing data: Invalid JSON file or incorrect format.');
            }
          };
          reader.readAsText(file);
        };
        input.click();
      },

      downloadSnapshot() {
        const section = prompt('Which section would you like to snapshot?\nOptions: homework, notices, events');
        if (!section) return;

        if (section === 'homework' && this.student) {
          const classHomework = this.homework[this.student.class] || [];
          let content = `<h1>Homework for Class ${this.student.class}</h1>`;
          content += `<p>Student: ${this.student.name}</p>`;
          content += `<p>Date: ${new Date().toLocaleDateString()}</p>`;
          content += '<h2>Assignments</h2>';
          content += '<ul>';
          classHomework.forEach(hw => {
            content += `<li><strong>${hw.subject}</strong> (${hw.date}) by ${hw.teacher}<br>${hw.instructions}</li>`;
          });
          content += '</ul>';

          this.printContent(content, 'homework');
        } else if (section === 'notices') {
          let content = '<h1>Important Notices</h1>';
          content += `<p>Date: ${new Date().toLocaleDateString()}</p>`;
          content += '<ul>';
          this.notices.forEach(notice => {
            content += `<li><strong>${notice.title}</strong> (${notice.date})<br>${notice.content}</li>`;
          });
          content += '</ul>';

          this.printContent(content, 'notices');
        } else if (section === 'events') {
          let content = '<h1>Upcoming Events</h1>';
          content += `<p>Date: ${new Date().toLocaleDateString()}</p>`;
          content += '<ul>';
          this.events.forEach(event => {
            content += `<li><strong>${event.title}</strong> (${event.date}, ${event.time}) at ${event.venue}<br>${event.description}</li>`;
          });
          content += '</ul>';

          this.printContent(content, 'events');
        } else {
          alert('Invalid section or no homework available for your class.');
        }
      },

      printContent(content, title) {
        const printWindow = window.open('', '_blank');
        printWindow.document.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>${title.charAt(0).toUpperCase() + title.slice(1)} Snapshot</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 50px; }
              h1 { color: #1a237e; border-bottom: 3px solid #3d5afe; padding-bottom: 10px; }
              h2 { color: #3d5afe; margin: 20px 0 10px 0; }
              ul { line-height: 1.8; }
              li { margin-bottom: 15px; }
              @media print {
                body { padding: 20px; }
              }
            </style>
          </head>
          <body>
            ${content}
            <script>
              setTimeout(() => window.print(), 500);
            <\/script>
          </body>
          </html>
        `);
        printWindow.document.close();
      },

      launchConfetti() {
        const container = document.getElementById('confetti-container');
        container.innerHTML = '';
        
        const colors = ['#00e676', '#3d5afe', '#ff1744', '#ff9100', '#ffeb3b'];
        const shapes = ['rect', 'circle'];
        
        for (let i = 0; i < 100; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          
          const shape = shapes[Math.floor(Math.random() * shapes.length)];
          if (shape === 'circle') {
            confetti.style.borderRadius = '50%';
            confetti.style.width = confetti.style.height = `${Math.random() * 10 + 5}px`;
          } else {
            confetti.style.width = `${Math.random() * 10 + 5}px`;
            confetti.style.height = `${Math.random() * 20 + 10}px`;
          }
          
          confetti.style.left = `${Math.random() * 100}vw`;
          confetti.style.opacity = '1';
          
          // Random animation duration and delay
          const duration = Math.random() * 3 + 2;
          const delay = Math.random() * 5;
          
          confetti.style.animation = `confetti ${duration}s ease-out ${delay}s forwards`;
          
          container.appendChild(confetti);
          
          // Remove confetti after animation
          setTimeout(() => {
            confetti.remove();
          }, (duration + delay) * 1000);
        }
      },

      startConfetti() {
        // Launch confetti on page load for celebration
        setTimeout(() => {
          this.launchConfetti();
        }, 2000);
      }
    };

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      MKPS.loadTheme();
      MKPS.init();
    });
  </script>
</body>
</html>
