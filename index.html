<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mili Karwaan — Ultimate Pro (All Features)</title>
<meta name="description" content="Ultimate professional school site for Mili Karwaan — full dashboards, admin, fees, timetable, calendar, reports, payments placeholders, SMS placeholders, export/import."/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{--g1:#0f766e;--g2:#065f46;--gold:#f59e0b;--muted:#6b7280;--card:#fff}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;background:#f7fff9;color:#04282a}
.container{max-width:1200px;margin:0 auto;padding:20px}
header{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px;border-radius:10px;background:linear-gradient(90deg,var(--g1),var(--g2));color:#fff}
.brand{display:flex;align-items:center;gap:12px}
.brand img{width:56px;height:56px;border-radius:10px}
nav ul{list-style:none;display:flex;gap:8px}
nav a{color:#fff;text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:600}
.hero{padding:28px;border-radius:12px;margin-top:12px;background:linear-gradient(180deg,#e6fff8,#f4fff7)}
.layout{display:grid;grid-template-columns:280px 1fr;gap:18px;margin-top:16px}
.sidebar{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 10px 30px rgba(2,8,6,0.06)}
.content{min-height:520px}
.card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 12px 30px rgba(2,8,6,0.05);margin-bottom:12px}
.btn{background:linear-gradient(90deg,var(--g1),var(--g2));color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
.small{font-size:.95rem;color:var(--muted)}
.section-title{display:flex;align-items:center;justify-content:space-between}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:8px;border-bottom:1px solid #f1f5f4;text-align:left}
.kv{display:flex;flex-direction:column;gap:6px}
.search{display:flex;gap:8px;margin-bottom:8px}
.footer{margin-top:18px;text-align:center;color:var(--muted)}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,6,0.5);z-index:9999;opacity:0;pointer-events:none;transition:opacity .12s}
.modal.open{opacity:1;pointer-events:auto}
.modal-card{background:#fff;padding:18px;border-radius:10px;width:94%;max-width:920px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
@media(max-width:900px){.layout{grid-template-columns:1fr}.grid-3{grid-template-columns:1fr}}
</style>
</head>
<body>
<header>
  <div class="brand"><img id="logo" src="https://i.postimg.cc/Zqm9DSvt/erasebg-transformed.png" alt="logo"/><div><strong>Mili Karwaan Public School</strong><div style="font-size:.85rem">Balrampur, Uttar Pradesh</div></div></div>
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#portal">Portal</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a id="openAdminBtn" href="#">Admin</a></li>
    </ul>
  </nav>
</header>
<div class="container">
  <section class="hero card" id="home">
    <div style="display:flex;justify-content:space-between;gap:12px;align-items:center">
      <div>
        <h2 style="margin-bottom:6px">Welcome to Mili Karwaan — Ultimate Pro</h2>
        <p class="small">Full-featured school website demo: student & teacher portals, admin, fees, timetable, calendar, reports, payments & SMS placeholders — all client-side and GitHub-ready.</p>
        <div style="margin-top:10px;display:flex;gap:8px"><button class="btn" id="openStudentPortal">Student Portal</button><button class="btn" id="openTeacherPortal">Teacher Portal</button></div>
      </div>
      <div style="width:280px;text-align:right">
        <div class="card" style="background:linear-gradient(90deg,var(--g1),var(--g2));color:#fff;border-radius:10px;"> <div style="font-weight:700;font-size:1.4rem">Admissions Open</div><div class="small">Call: +91 97589 19151</div></div>
      </div>
    </div>
  </section>  <div class="layout">
    <aside class="sidebar">
      <div class="card"><strong>Quick Actions</strong><div style="margin-top:8px;display:flex;flex-direction:column;gap:8px"><button class="btn" id="quickAddHw">Add Homework</button><button class="btn" id="quickAddNotice">Add Notice</button><button class="btn" id="quickAddEvent">Add Event</button></div></div>
      <div class="card">
        <strong>Search</strong>
        <div class="search"><input id="globalSearch" placeholder="Search students, homework, notices" style="flex:1;padding:8px;border-radius:8px;border:1px solid #e6f3ef"/><button class="btn" id="searchBtn">Search</button></div>
        <div id="searchResults" class="small muted"></div>
      </div>
      <div class="card">
        <strong>Live Tools</strong>
        <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px"><button class="btn" id="sendSmsBtn">Send SMS (placeholder)</button><button class="btn" id="payDemoBtn">Razorpay Demo</button><button class="btn" id="backupBtn">Export Backup</button></div>
      </div>
    </aside><main class="content">
  <div class="card section-title"><h3>Portal Overview</h3><div class="small">Admin password: <strong>Abutalha</strong></div></div>

  <div class="grid-3">
    <div class="card"><strong>Students</strong><div id="statStudents" style="font-size:1.4rem">0</div></div>
    <div class="card"><strong>Teachers</strong><div id="statTeachers" style="font-size:1.4rem">0</div></div>
    <div class="card"><strong>Active Notices</strong><div id="statNotices" style="font-size:1.4rem">0</div></div>
  </div>

  <div class="card">
    <div class="section-title"><h4>Homework (Recent)</h4><div><button class="btn" id="viewAllHw">View All</button></div></div>
    <div id="hwList"></div>
  </div>

  <div class="card">
    <div class="section-title"><h4>Attendance Snapshot</h4><div><button class="btn" id="printAttendance">Print</button></div></div>
    <div id="attendanceSnapshot" style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px"></div>
  </div>

  <div class="card">
    <div class="section-title"><h4>Fees Module</h4><div><button class="btn" id="openFees">Open Fees</button></div></div>
    <div id="feesPreview"></div>
  </div>

  <div class="card">
    <div class="section-title"><h4>Timetable</h4><div><button class="btn" id="openTimetable">Open Timetable</button></div></div>
    <div id="timetablePreview"></div>
  </div>

</main>

  </div>  <div class="footer">Built: Ultimate Pro • Local demo — export/import works. Want cloud? I can add Firebase or Node backend.</div>
</div><!-- Modal --><div class="modal" id="modal"><div class="modal-card" id="modalCard"></div></div><script>
// Ultimate Pro — single-file full features (client-side demo)
const ADMIN_PWD = 'Abutalha'
const KEY = 'MKPS_ULTIMATE_v1'
const SAMPLE = {
  students:[{id:'s1',name:'Aman Kumar',class:'Class 6',phone:'9876543210'}],
  teachers:[{id:'t1',name:'Mrs. Sharma',subject:'Science'}],
  homework:[{id:'h1',subject:'Mathematics',title:'Algebra Exercise',due:'2025-11-25',notes:'Do Q1-20',created:new Date().toISOString()}],
  notices:[{id:'n1',title:'PTM',date:'2025-11-28',time:'4:00 PM',body:'Parents must attend'}],
  attendance:{'Class 6':{present:28,total:30}},
  fees:[{id:'f1',studentId:'s1',name:'Aman Kumar',amount:15000,status:'unpaid'}],
  timetable:{'Class 6':[ {day:'Mon',time:'8:00-9:00',sub:'Maths'} ] }
}
function load(){ try{ const raw=localStorage.getItem(KEY); return raw?JSON.parse(raw):JSON.parse(JSON.stringify(SAMPLE)) }catch(e){return JSON.parse(JSON.stringify(SAMPLE))}}
function save(d){ localStorage.setItem(KEY,JSON.stringify(d)) }
let STORE = load()

// UI helpers
const $ = s=>document.querySelector(s)
const $$ = s=>Array.from(document.querySelectorAll(s))
const uid = p=>p+Math.random().toString(36).slice(2,9)
function openModal(html){ $('#modalCard').innerHTML = html; $('#modal').classList.add('open'); }
function closeModal(){ $('#modal').classList.remove('open'); }

// render summary
function renderStats(){ $('#statStudents').textContent = STORE.students.length; $('#statTeachers').textContent = STORE.teachers.length; $('#statNotices').textContent = STORE.notices.length }

function renderHW(){ const list = STORE.homework.slice(0,6); $('#hwList').innerHTML = list.map(h=>`<div style="padding:10px;border-radius:8px;background:#fbfff8;margin-bottom:8px"><strong>${h.subject} - ${h.title}</strong><div class="small">Due: ${new Date(h.due).toLocaleDateString()}</div><div style="margin-top:6px">${h.notes}</div></div>`).join('') }

function renderAttendance(){ const el = $('#attendanceSnapshot'); el.innerHTML=''; for(const cls in STORE.attendance){ const a = STORE.attendance[cls]; const pct = Math.round(a.present / a.total * 100 || 0); const div = document.createElement('div'); div.className='card'; div.style.minWidth='160px'; div.innerHTML=`<strong>${cls}</strong><div style='font-size:1.2rem'>${a.present}/${a.total}</div><div class='small'>${pct}% present</div>`; el.appendChild(div); } }

function renderFeesPreview(){ $('#feesPreview').innerHTML = STORE.fees.map(f=>`<div style="padding:8px;border-radius:8px;background:#fff8f2;margin-bottom:8px"><strong>${f.name}</strong> — ₹${f.amount} — <em>${f.status}</em> <button data-id='${f.id}' class='btn' style='margin-left:8px'>Pay</button></div>`).join('') }

function renderTimetablePreview(){ const t = STORE.timetable || {}; let s=''; for(const cls in t){ s += `<div class='card'><strong>${cls}</strong>${t[cls].map(it=>`<div>${it.day} • ${it.time} • ${it.sub}</div>`).join('')}</div>` } $('#timetablePreview').innerHTML = s }

// initial render
renderStats(); renderHW(); renderAttendance(); renderFeesPreview(); renderTimetablePreview();

// actions
$('#openAdminBtn').addEventListener('click', ()=>{
  const pwd = prompt('Enter admin password:')
  if(pwd===ADMIN_PWD){ // open admin in new window with data passed via blob URL
    const blob = new Blob([createAdminHtml(JSON.stringify(STORE))], {type:'text/html'});
    const url = URL.createObjectURL(blob);
    window.open(url,'_blank');
  } else alert('Wrong password')
})

// quick add
$('#quickAddHw').addEventListener('click', ()=>{ const subject=prompt('Subject:','Mathematics'); if(!subject) return; const title=prompt('Title:','Exercise'); const due=prompt('Due (YYYY-MM-DD):','2025-11-25'); const notes=prompt('Notes:',''); const id=uid('h'); STORE.homework.unshift({id,subject,title,due,notes,created:new Date().toISOString()}); save(STORE); renderHW(); alert('Added') })
$('#quickAddNotice').addEventListener('click', ()=>{ const title=prompt('Title:'); if(!title) return; const date=prompt('Date (YYYY-MM-DD):','2025-11-28'); const time=prompt('Time:','4:00 PM'); const body=prompt('Details:',''); const id=uid('n'); STORE.notices.unshift({id,title,date,time,body}); save(STORE); renderStats(); alert('Notice added') })
$('#quickAddEvent').addEventListener('click', ()=>{ const title=prompt('Event:'); if(!title) return; const date=prompt('Date:','2025-12-06'); const id=uid('e'); (STORE.events=STORE.events||[]).unshift({id,title,date}); save(STORE); alert('Event added') })

// search
$('#searchBtn').addEventListener('click', ()=>{ const q = $('#globalSearch').value.trim().toLowerCase(); if(!q) { $('#searchResults').textContent='Type to search'; return } const students = STORE.students.filter(s=> (s.name||'').toLowerCase().includes(q)); const hw = STORE.homework.filter(h=> (h.title+h.subject+h.notes).toLowerCase().includes(q)); const notices = STORE.notices.filter(n=> (n.title+n.body).toLowerCase().includes(q)); $('#searchResults').innerHTML = `Students: ${students.length} • Homework: ${hw.length} • Notices: ${notices.length}` })

// export
$('#backupBtn').addEventListener('click', ()=>{ const b = new Blob([JSON.stringify(STORE,null,2)],{type:'application/json'}); const url = URL.createObjectURL(b); const a = document.createElement('a'); a.href=url; a.download='mkps-ultimate-backup.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url) })

// Send SMS placeholder
$('#sendSmsBtn').addEventListener('click', ()=>{ const msg = prompt('Message to send (demo - no real SMS will be sent):'); if(!msg) return; alert('SMS placeholder: Ready to send via MSG91/Twilio. See README for integration.') })

// payments demo
$('#payDemoBtn').addEventListener('click', ()=>{ alert('Payment placeholder (Razorpay/PayU). I can wire real keys later.') })

// fees pay button delegated
document.addEventListener('click', e=>{ if(e.target.matches('#feesPreview .btn') || e.target.matches('[data-id]')){ const id = e.target.dataset.id; const f = STORE.fees.find(x=>x.id===id); if(f){ if(confirm(`Pay ₹${f.amount} for ${f.name}? (demo)`)){ f.status='paid'; save(STORE); renderFeesPreview(); alert('Payment recorded (local only)') } } } })

// portals
$('#openStudentPortal').addEventListener('click', ()=>{ openModal(`<h3>Student Portal (Demo)</h3><p class='small'>Enter student id to login (demo):</p><div style='margin-top:8px'><input id='stuId' placeholder='s1' style='padding:8px;border-radius:8px;border:1px solid #eee'/> <button class='btn' id='stuLogin'>Login</button></div>`); $('#modal').querySelector('#stuLogin').addEventListener('click', ()=>{ const id = $('#stuId').value.trim(); const s = STORE.students.find(x=>x.id===id); if(!s){ alert('Not found'); return } closeModal(); openModal(`<h3>Welcome ${s.name}</h3><p class='small'>Class: ${s.class}</p><div style='margin-top:8px'><button class='btn' id='viewHwStudent'>My Homework</button> <button class='btn' id='viewFeesStudent'>My Fees</button></div>`); $('#modal').querySelector('#viewHwStudent').addEventListener('click', ()=>{ const hw = STORE.homework.filter(h=>h.subject.toLowerCase().includes('math')||true); openModal(`<h3>Homework</h3>${hw.map(h=>`<div class='card'><strong>${h.title}</strong><div class='small'>Due: ${new Date(h.due).toLocaleDateString()}</div><div>${h.notes}</div></div>`).join('')}`) }) }) })

$('#openTeacherPortal').addEventListener('click', ()=>{ const name = prompt('Teacher name (demo):'); if(!name) return; alert('Logged in as teacher (demo). Use admin for full features.') })

// printable attendance
$('#printAttendance').addEventListener('click', ()=>{ const w = window.open('','_blank'); w.document.write('<h3>Attendance Report</h3>'); w.document.write('<pre>'+JSON.stringify(STORE.attendance,null,2)+'</pre>'); w.document.close(); w.print(); })// view all hw $('#viewAllHw').addEventListener('click', ()=>{ openModal('<h3>All Homework</h3>'+STORE.homework.map(h=><div class="card"><strong>${h.subject} - ${h.title}</strong><div class="small">Due: ${new Date(h.due).toLocaleDateString()}</div><div>${h.notes}</div></div>).join('')) })

// attendance print $('#printAttendance').addEventListener('click', ()=>{ /* handled above */ })

// timetable $('#openTimetable').addEventListener('click', ()=>{ openModal('<h3>Timetable</h3>'+Object.keys(STORE.timetable).map(cls=><h4>${cls}</h4>).join('')) })

// modal close on outside click document.getElementById('modal').addEventListener('click', e=>{ if(e.target.id==='modal') closeModal() })

// create admin HTML to open in new window with data embedded function createAdminHtml(dataJson){ return <!doctype html><html><head><meta charset="utf-8"><title>MKPS Admin — Ultimate</title><meta name='viewport' content='width=device-width,initial-scale=1'><style>body{font-family:Inter,system-ui;padding:12px;background:#021421;color:#cfeee3} .btn{background:linear-gradient(90deg,#0f766e,#d97706);border:none;padding:8px 10px;color:#021;cursor:pointer;border-radius:8px}</style></head><body><h2>MKPS Admin — DEMO</h2><p>This admin was opened from the main app. Data below is a copy (local only)</p><pre id='dump'></pre><button class='btn' id='close'>Close</button><script>document.getElementById('dump').textContent=${JSON.stringify(dataJson)}; document.getElementById('close').addEventListener('click',()=>window.close())</script></body></html> }

</script>
</body>
</html>
