<!doctype html>

<!--
  Mili Karwaan Public School - Student Dashboard (Home)
  Professional, single-file, GitHub-ready HTML
  - Uses localStorage to persist student session & data (homework, notices, attendance)
  - Includes inline JS to handle navigation, CRUD for visible items (admin actions restricted)
  - Admin page is referenced as "admin.html" (deliver separately on request)
  - To host on GitHub Pages: push this file to a repo and enable Pages (README below)
--><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mili Karwaan Public School — Student Dashboard</title>
  <meta name="description" content="Student dashboard for Mili Karwaan Public School — homework, attendance, notices, contact."/>
  <meta name="theme-color" content="#1e40af" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="" crossorigin="anonymous">
  <style>
    :root{
      --brand-1:#1e40af; --brand-2:#1e3a8a; --accent:#f59e0b; --bg-start:#f0f9ff; --bg-end:#e0f2fe; --card:#ffffff;
      --maxw:1200px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg-start),var(--bg-end));color:#10223b;line-height:1.6}
    .container{max-width:var(--maxw);margin:0 auto;padding:20px}/* HERO */
.hero{background:linear-gradient(135deg,var(--brand-1),var(--brand-2));color:#fff;padding:48px 20px;border-bottom-left-radius:26px;border-bottom-right-radius:26px;text-align:center}
.hero h1{font-family:'Montserrat',sans-serif;font-size:2.2rem}
.hero p{margin-top:6px;opacity:.92}

/* ENTRY CARD */
.entry-box{max-width:640px;margin:-48px auto 28px;background:var(--card);border-radius:18px;padding:26px;box-shadow:0 20px 40px rgba(2,6,23,.12)}
.form-title{color:var(--brand-1);font-weight:700;font-family:'Montserrat',sans-serif;text-align:center;margin-bottom:18px}
.row{display:flex;gap:12px}
.form-control{margin-bottom:14px}
label{display:block;font-weight:600;color:var(--brand-1);margin-bottom:8px}
input[type=text],select{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e6eefc;background:#f8fafc;font-weight:600}
button.primary{background:linear-gradient(135deg,var(--accent),#d97706);border:none;color:#fff;padding:12px 18px;border-radius:999px;font-weight:700;cursor:pointer;width:100%}
button.ghost{background:transparent;border:1px solid #e2e8f0;padding:10px 14px;border-radius:10px;cursor:pointer}

/* LAYOUT */
.main-grid{display:flex;gap:22px;margin-top:28px}
.sidebar{width:320px;background:var(--card);padding:20px;border-radius:16px;box-shadow:0 14px 28px rgba(2,6,23,.08)}
.content{flex:1}
.sidebar-header{text-align:center;color:var(--brand-1);font-weight:800;font-family:'Montserrat',sans-serif;margin-bottom:12px}
.student-info{background:linear-gradient(135deg,#eff6ff,#dbeafe);padding:16px;border-radius:12px;text-align:center;margin-bottom:12px}
.student-name{font-weight:800}
.student-class{display:inline-block;margin-top:8px;padding:6px 14px;border-radius:999px;background:#fff;font-weight:700;color:#065f46}
.menu{list-style:none;margin-top:12px}
.menu a{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:10px;text-decoration:none;color:#10223b;font-weight:600}
.menu a.active{background:#eff6ff;color:var(--brand-1);transform:translateX(6px)}

.card{background:var(--card);padding:18px;border-radius:14px;margin-bottom:16px;box-shadow:0 8px 18px rgba(2,6,23,.06)}
.section-title{display:flex;align-items:center;gap:12px;color:var(--brand-1);font-family:'Montserrat',sans-serif;font-weight:700;margin-bottom:12px}

.homework-list .item{background:#f8fafc;padding:12px;border-left:6px solid var(--accent);border-radius:10px;margin-bottom:10px}
.meta{display:flex;gap:12px;color:#64748b;font-size:.95rem;margin-top:8px}

/* fixed actions */
.fab-row{position:fixed;right:20px;bottom:20px;display:flex;flex-direction:column;gap:12px;z-index:999}
.fab{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;text-decoration:none;box-shadow:0 8px 24px rgba(2,6,23,.18);border:3px solid #fff}
.fab.whatsapp{background:#25D366}
.fab.call{background:#10B981}
.fab.admin{background:#ef4444}

/* responsive */
@media (max-width:900px){.main-grid{flex-direction:column}.sidebar{width:100%}.entry-box{margin: -36px 12px 10px}}

/* small helper */
.muted{color:#64748b}
a.small{font-size:.95rem}
.hidden{display:none}

  </style>
</head>
<body>
  <header class="hero">
    <div class="container">
      <h1>Mili Karwaan Public School</h1>
      <p>Balrampur, Uttar Pradesh • +91 97589 19151</p>
    </div>
  </header>  <main class="container">
    <!-- Entry box -->
    <section class="entry-box" id="entryBox" aria-labelledby="authTitle">
      <h2 id="authTitle" class="form-title">Student Authentication</h2>
      <div class="form-control">
        <label for="studentName">Student's Full Name</label>
        <input id="studentName" type="text" placeholder="Enter student name" autocomplete="name" />
      </div>
      <div class="row" style="margin-bottom:12px">
        <div style="flex:1" class="form-control">
          <label for="studentClass">Class</label>
          <select id="studentClass">
            <option value="">Select Class</option>
            <option>Nursery</option>
            <option>LKG</option>
            <option>UKG</option>
            <option>Class 1</option>
            <option>Class 2</option>
            <option>Class 3</option>
            <option>Class 4</option>
            <option>Class 5</option>
            <option>Class 6</option>
            <option>Class 7</option>
            <option>Class 8</option>
            <option>Class 9</option>
            <option>Class 10</option>
            <option>Class 11</option>
            <option>Class 12</option>
          </select>
        </div>
        <div style="width:160px;align-self:end">
          <button id="accessButton" class="primary">Access Dashboard</button>
        </div>
      </div><div style="display:flex;gap:10px;justify-content:center">
    <button id="demoBtn" class="ghost">Use Demo Student</button>
    <button id="clearBtn" class="ghost">Clear Session</button>
  </div>
</section>

<!-- Dashboard -->
<section id="dashboard" class="main-grid hidden" aria-hidden="true">
  <aside class="sidebar" role="navigation" aria-label="Student sidebar">
    <div class="sidebar-header">Student Portal</div>
    <div class="student-info">
      <div class="student-name" id="displayName">Student Name</div>
      <div class="student-class" id="displayClass">Class: Not Selected</div>
    </div>

    <ul class="menu" id="menu">
      <li><a href="#" data-view="homework" class="active"><i class="fas fa-pen"></i> Homework</a></li>
      <li><a href="#" data-view="attendance"><i class="fas fa-check-circle"></i> Attendance</a></li>
      <li><a href="#" data-view="materials"><i class="fas fa-book"></i> Study Materials</a></li>
      <li><a href="#" data-view="exams"><i class="fas fa-file-alt"></i> Exam Schedule</a></li>
      <li><a href="#" data-view="achievements"><i class="fas fa-trophy"></i> Achievements</a></li>
      <li><a href="#" data-view="timings"><i class="fas fa-clock"></i> School Timings</a></li>
      <li><a href="#" data-view="holidays"><i class="fas fa-calendar-alt"></i> Holidays</a></li>
      <li><a href="#" data-view="notices"><i class="fas fa-bullhorn"></i> Notices</a></li>
      <li><a href="#" data-view="contact"><i class="fas fa-phone"></i> Contact</a></li>
    </ul>

    <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
      <a id="exportBtn" class="small" href="#">Export Data</a>
      <a id="importBtn" class="small" href="#">Import Data</a>
      <a id="openAdmin" class="small" href="admin.html">Admin</a> <!-- admin.html will be provided separately -->
    </div>
  </aside>

  <section class="content" aria-live="polite">
    <div class="card content-header" style="display:flex;justify-content:space-between;align-items:center">
      <div class="content-title" id="pageTitle">Homework</div>
      <div class="muted" id="sessionNote">Logged in</div>
    </div>

    <div class="card content-body" id="contentBody">
      <!-- dynamic content goes here -->
    </div>
  </section>
</section>

  </main>  <!-- Floating action buttons -->  <div class="fab-row" aria-hidden="false">
    <a class="fab whatsapp" href="https://wa.me/919758919151" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    <a class="fab call" href="tel:+919758919151" aria-label="Call"><i class="fas fa-phone"></i></a>
    <a class="fab admin" id="fabAdmin" href="admin.html" aria-label="Admin"><i class="fas fa-user-shield"></i></a>
  </div>  <footer style="text-align:center;padding:24px 6px;color:#64748b;font-size:.95rem">
    © Mili Karwaan Public School — Built for GitHub Pages • This is a demo student dashboard. For admin features, request the admin panel.
  </footer>  <script>
    /* -----------------------------
       Client-side app (single-file)
       - Saves session to localStorage under key: MKPS_SESSION
       - Stores app data under key: MKPS_DATA
       - Demo admin operations are disabled in this file (admin.html will enable CRUD)
       ----------------------------- */

    const SELECTORS = {
      entryBox: document.getElementById('entryBox'),
      dashboard: document.getElementById('dashboard'),
      accessButton: document.getElementById('accessButton'),
      demoBtn: document.getElementById('demoBtn'),
      clearBtn: document.getElementById('clearBtn'),
      displayName: document.getElementById('displayName'),
      displayClass: document.getElementById('displayClass'),
      pageTitle: document.getElementById('pageTitle'),
      contentBody: document.getElementById('contentBody'),
      menu: document.getElementById('menu')
    }

    const STORAGE = {
      sessionKey: 'MKPS_SESSION_v1',
      dataKey: 'MKPS_DATA_v1'
    }

    // Starter sample data (used when there's no saved data)
    const SAMPLE_DATA = {
      homework: [
        { id: 'hw1', subject: 'Mathematics', title: 'Chapter 5: Algebra', due: '2025-11-25', notes: 'Solve exercise 5.3, Q1-15.' },
        { id: 'hw2', subject: 'English', title: 'Literature', due: '2025-11-26', notes: 'Read Chapter 7 and write 200-word summary.' }
      ],
      attendance: { presentPercent: 98, absentPercent: 2, onTimePercent: 100, months: { 'July 2025':'30/30','August 2025':'28/30' } },
      materials: [ { id:'mat1', title:'Mathematics Notes - Chapter 5', url:'#' } ],
      exams: { start:'2025-12-15', end:'2025-12-20' },
      achievements: [ { id:'a1', title:'Science Olympiad - 2nd Position', date:'2025-09-15'} ],
      timings: { weekdays:'8:00 AM - 3:00 PM', saturday:'8:00 AM - 1:00 PM' },
      holidays: [ { id:'h1', title:'Diwali Holiday', range:'31 Oct - 3 Nov 2025' } ],
      notices: [ { id:'n1', title:'Parent-Teacher Meeting', date:'2025-11-28', time:'4:00 PM' } ],
      contact: { principalPhone:'+919758919151' }
    }

    // Utility functions
    const qs = sel => document.querySelector(sel)
    const qsa = sel => Array.from(document.querySelectorAll(sel))
    const uid = prefix => prefix + Math.random().toString(36).slice(2,9)

    function saveData(data){ localStorage.setItem(STORAGE.dataKey, JSON.stringify(data)) }
    function loadData(){ const v = localStorage.getItem(STORAGE.dataKey); return v ? JSON.parse(v) : JSON.parse(JSON.stringify(SAMPLE_DATA)) }
    function saveSession(session){ localStorage.setItem(STORAGE.sessionKey, JSON.stringify(session)) }
    function loadSession(){ const v = localStorage.getItem(STORAGE.sessionKey); return v ? JSON.parse(v) : null }
    function clearSession(){ localStorage.removeItem(STORAGE.sessionKey) }

    // Render helpers for each view
    function renderHomework(data){
      const list = data.homework
      const html = `
        <div class="section-title"><i class="fas fa-pen"></i> Homework</div>
        <div class="homework-list">
          ${list.map(hw => `
            <div class="item" data-id="${hw.id}">
              <strong>${hw.subject} — ${hw.title}</strong>
              <div class="meta"><span><i class="fas fa-calendar"></i> Due: ${formatDate(hw.due)}</span></div>
              <p style="margin-top:8px">${escapeHtml(hw.notes || '')}</p>
            </div>
          `).join('')}
        </div>
      `
      return html
    }

    function renderAttendance(data){
      const att = data.attendance
      return `
        <div class="section-title"><i class="fas fa-check-circle"></i> Attendance Record</div>
        <div style="display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap">
          <div style="flex:1" class="card"><div style="font-weight:800;font-size:1.6rem;color:#10b981">${att.presentPercent}%</div><div class="muted">Present</div></div>
          <div style="flex:1" class="card"><div style="font-weight:800;font-size:1.6rem;color:#ef4444">${att.absentPercent}%</div><div class="muted">Absent</div></div>
          <div style="flex:1" class="card"><div style="font-weight:800;font-size:1.6rem;color:#f59e0b">${att.onTimePercent}%</div><div class="muted">On Time</div></div>
        </div>
        <div class="card">
          ${Object.keys(att.months || {}).map(m => `<p><strong>${m}:</strong> ${att.months[m]}</p>`).join('')}
        </div>
      `
    }

    function renderMaterials(data){
      return `
        <div class="section-title"><i class="fas fa-book"></i> Study Materials</div>
        ${data.materials.map(m => `<div class="card"><h4>${m.title}</h4><p><a href="${m.url}" target="_blank">Open</a></p></div>`).join('')}
      `
    }

    function renderExams(data){
      return `
        <div class="section-title"><i class="fas fa-file-alt"></i> Exam Schedule</div>
        <div class="card"><p><strong>Start:</strong> ${formatDate(data.exams.start)}<br/><strong>End:</strong> ${formatDate(data.exams.end)}</p></div>
      `
    }

    function renderAchievements(data){
      return `
        <div class="section-title"><i class="fas fa-trophy"></i> Achievements</div>
        ${data.achievements.map(a => `<div class="card"><h4>${a.title}</h4><p><strong>Awarded:</strong> ${formatDate(a.date)}</p></div>`).join('')}
      `
    }

    function renderTimings(data){
      return `
        <div class="section-title"><i class="fas fa-clock"></i> School Timings</div>
        <div class="card"><p><strong>Mon-Fri:</strong> ${data.timings.weekdays}<br/><strong>Saturday:</strong> ${data.timings.saturday}</p></div>
      `
    }

    function renderHolidays(data){
      return `
        <div class="section-title"><i class="fas fa-calendar-alt"></i> Upcoming Holidays</div>
        ${data.holidays.map(h => `<div class="card"><h4>${h.title}</h4><p>${h.range}</p></div>`).join('')}
      `
    }

    function renderNotices(data){
      return `
        <div class="section-title"><i class="fas fa-bullhorn"></i> Notices</div>
        ${data.notices.map(n => `<div class="card"><h4>${n.title}</h4><p><strong>Date:</strong> ${formatDate(n.date)} ${n.time ? '| <strong>Time:</strong> ' + n.time : ''}</p></div>`).join('')}
      `
    }

    function renderContact(data){
      return `
        <div class="section-title"><i class="fas fa-phone"></i> Contact</div>
        <div class="card"><h4>Principal's Office</h4><p><strong>Phone:</strong> <a href="tel:${data.contact.principalPhone}">${data.contact.principalPhone}</a></p></div>
      `
    }

    function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) }
    function formatDate(d){ if(!d) return '-'; try{ const dt = new Date(d); if(isNaN(dt)) return d; return dt.toLocaleDateString(); }catch(e){return d} }

    // Router: set active view and render
    let currentView = 'homework'
    function setView(view){
      currentView = view
      qsa('.menu a').forEach(a => a.classList.toggle('active', a.dataset.view === view))
      document.getElementById('pageTitle').textContent = view.charAt(0).toUpperCase() + view.slice(1)
      const data = loadData()
      let html = ''
      switch(view){
        case 'homework': html = renderHomework(data); break
        case 'attendance': html = renderAttendance(data); break
        case 'materials': html = renderMaterials(data); break
        case 'exams': html = renderExams(data); break
        case 'achievements': html = renderAchievements(data); break
        case 'timings': html = renderTimings(data); break
        case 'holidays': html = renderHolidays(data); break
        case 'notices': html = renderNotices(data); break
        case 'contact': html = renderContact(data); break
        default: html = '<div class="card">Not found</div>'
      }
      SELECTORS.contentBody.innerHTML = html
    }

    // Setup menu clicks
    qsa('.menu a').forEach(a => a.addEventListener('click', e => { e.preventDefault(); setView(a.dataset.view) }))

    // Session handling
    function openDashboard(session){
      SELECTORS.displayName.textContent = session.name
      SELECTORS.displayClass.textContent = session.class ? session.class : 'Class: Not Selected'
      SELECTORS.entryBox.classList.add('hidden')
      const dash = SELECTORS.dashboard
      dash.classList.remove('hidden')
      dash.removeAttribute('aria-hidden')
      renderAll()
    }

    function renderAll(){ setView(currentView) }

    SELECTORS.accessButton.addEventListener('click', ()=>{
      const name = document.getElementById('studentName').value.trim()
      const cls = document.getElementById('studentClass').value
      if(!name || !cls){ alert('Please enter name and class to continue.') ; return }
      const session = { name, class: cls, loggedAt: new Date().toISOString() }
      saveSession(session)
      openDashboard(session)
    })

    document.getElementById('demoBtn').addEventListener('click', ()=>{
      const session = { name: 'Demo Student', class: 'Class 6', loggedAt: new Date().toISOString() }
      saveSession(session)
      // ensure data exists
      if(!localStorage.getItem(STORAGE.dataKey)) saveData(SAMPLE_DATA)
      openDashboard(session)
    })

    document.getElementById('clearBtn').addEventListener('click', ()=>{
      if(confirm('Clear session and return to sign-in?')){ clearSession(); location.reload() }
    })

    // Export / Import
    document.getElementById('exportBtn').addEventListener('click', (e)=>{
      e.preventDefault()
      const data = loadData()
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'})
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url; a.download = 'mkps-data.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url)
    })

    document.getElementById('importBtn').addEventListener('click', (e)=>{
      e.preventDefault()
      const input = document.createElement('input'); input.type='file'; input.accept='.json'
      input.onchange = ()=>{
        const f = input.files[0]; if(!f) return; const reader = new FileReader();
        reader.onload = ()=>{ try{ const parsed = JSON.parse(reader.result); saveData(parsed); alert('Data imported — refresh to view.'); }catch(err){ alert('Invalid JSON file.') } }
        reader.readAsText(f)
      }
      input.click()
    })

    // On load: restore session if exists
    (function init(){
      const session = loadSession()
      if(session){ openDashboard(session) }
      // ensure data exists
      if(!localStorage.getItem(STORAGE.dataKey)) saveData(SAMPLE_DATA)
    })()

    // Small accessibility & UX helpers
    // Secret keyboard shortcut (for dev) to open admi
