```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MarÃ¡kÃ© Portal</title>
<style>
:root{
  --bg:#0a0a0a;
  --bg2:#111;
  --glass: rgba(255,255,255,.08);
  --glass2: rgba(255,255,255,.15);
  --accent:#00ffe5;
  --accent2:#ff00e5;
  --text:#ffffff;
  --text2:#cccccc;
  --font:"Inter",sans-serif;
  --radius:18px;
  --shadow:0 10px 30px rgba(0,255,229,.25);
  --shadow2:0 15px 40px rgba(255,0,229,.25);
}
body{
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
  transition:background .4s;
}
body.light{
  --bg:#fafafa;
  --bg2:#fff;
  --glass: rgba(0,0,0,.05);
  --glass2: rgba(0,0,0,.1);
  --text:#111;
  --text2:#333;
}
*{
  box-sizing:border-box;
}
h1,h2,h3{
  margin:0;
  font-weight:700;
}
button{
  cursor:pointer;
  border:none;
  font-family:var(--font);
  font-weight:600;
}
nav{
  position:fixed;top:0;left:0;right:0;height:70px;z-index:999;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 2rem;
  background:var(--glass);backdrop-filter:blur(20px);
  box-shadow:0 5px 20px rgba(0,0,0,.3);
  transition:top .3s;
}
nav .logo{
  font-size:1.5rem;color:var(--accent);letter-spacing:.1em;
}
nav ul{
  display:flex;gap:1.5rem;list-style:none;
}
nav a{
  text-decoration:none;color:var(--text);position:relative;
  transition:color .3s;
}
nav a:hover{color:var(--accent);}
nav a::after{
  content:"";position:absolute;left:0;bottom:-6px;width:0;height:2px;
  background:var(--accent);transition:width .3s;
}
nav a:hover::after{width:100%;}
main{padding-top:80px;}
section{padding:4rem 2rem;max-width:1200px;margin:auto;}
.gate{
  position:fixed;inset:0;background:var(--bg);z-index:9999;
  display:flex;align-items:center;justify-content:center;
  flex-direction:column;gap:1rem;
  transition:opacity .6s;
}
.gate.hidden{opacity:0;pointer-events:none}
.gate h1{font-size:2rem;margin-bottom:1rem}
.gate input{
  width:300px;padding:1rem;border-radius:var(--radius);
  border:1px solid var(--accent);background:var(--glass);
  color:var(--text);outline:none;
}
.gate button{
  padding:1rem 2rem;border-radius:var(--radius);
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000;font-weight:700;font-size:1rem;
  box-shadow:var(--shadow);
  transition:transform .3s;
}
.gate button:hover{transform:translateY(-2px)}
.card{
  background:var(--glass);border-radius:var(--radius);
  padding:2rem;backdrop-filter:blur(20px);
  box-shadow:var(--shadow);
  transition:transform .3s, box-shadow .3s;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:var(--shadow2);
}
.grid{display:grid;gap:2rem;}
.grid-2{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.grid-3{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));}
.btn{
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000;padding:.8rem 1.4rem;border-radius:var(--radius);
  font-weight:700;box-shadow:var(--shadow);transition:.3s;
}
.btn:hover{transform:translateY(-2px);box-shadow:var(--shadow2);}
.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.8);
  display:flex;align-items:center;justify-content:center;
  z-index:999;opacity:0;pointer-events:none;transition:.3s;
}
.modal.active{opacity:1;pointer-events:auto}
.modal .content{
  background:var(--glass);border-radius:var(--radius);
  padding:2rem;max-width:600px;width:90%;
  backdrop-filter:blur(20px);box-shadow:var(--shadow2);
}
.close{position:absolute;top:1rem;right:1.5rem;font-size:2rem;cursor:pointer;}
table{width:100%;border-collapse:collapse;margin-top:1rem;}
th,td{padding:1rem;border:1px solid var(--glass2);text-align:left;}
.lightbox{
  position:fixed;inset:0;background:rgba(0,0,0,.9);
  display:flex;align-items:center;justify-content:center;
  z-index:9999;opacity:0;pointer-events:none;transition:.3s;
}
.lightbox.active{opacity:1;pointer-events:auto}
.lightbox img{max-width:90%;max-height:80%;border-radius:var(--radius)}
.lightbox button{
  position:absolute;top:50%;transform:translateY(-50%);
  font-size:2rem;background:var(--glass);border-radius:50%;
  width:50px;height:50px;color:var(--text);
  display:flex;align-items:center;justify-content:center;
}
.lightbox .prev{left:2rem}
.lightbox .next{right:2rem}
#particles{position:fixed;inset:0;z-index:-1;pointer-events:none}
.fab{
  position:fixed;bottom:2rem;right:2rem;
  width:60px;height:60px;border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000;font-size:1.5rem;
  display:flex;align-items:center;justify-content:center;
  box-shadow:var(--shadow);z-index:998;transition:.3s;
}
.fab:hover{transform:scale(1.1)}
.theme-toggle{
  position:fixed;top:90px;right:2rem;z-index:997;
  background:var(--glass);border-radius:50%;width:50px;height:50px;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;box-shadow:var(--shadow);
}
</style>
</head>
<body>
<canvas id="particles"></canvas>

<!-- Access Gate -->
<div class="gate" id="gate">
  <h1>Welcome to MarÃ¡kÃ© Portal</h1>
  <input type="text" id="stuName" placeholder="Student Name">
  <input type="text" id="stuClass" placeholder="Class">
  <input type="text" id="parentName" placeholder="Parent Name">
  <button onclick="submitGate()">Enter</button>
</div>

<nav>
  <div class="logo">MarÃ¡kÃ©</div>
  <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#homework">Homework</a></li>
    <li><a href="#teachers">Teachers</a></li>
    <li><a href="#events">Events</a></li>
    <li><a href="#notices">Notices</a></li>
    <li><a href="#timetable">Timetable</a></li>
    <li><a href="#gallery">Gallery</a></li>
    <li><a href="#achievements">Achievements</a></li>
    <li><a href="#faq">FAQ</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
</nav>

<main>
  <section id="home">
    <h1>Welcome, <span id="welcomeName">Student</span></h1>
    <p>Your premium school portal experience begins here.</p>
  </section>

  <section id="homework">
    <h2>Homework</h2>
    <input type="search" id="hwSearch" placeholder="Search..." oninput="filterHW()">
    <select id="hwFilter" onchange="filterHW()">
      <option value="">All Classes</option>
      <option>10</option><option>11</option><option>12</option>
    </select>
    <button class="btn" onclick="printHW()">Print</button>
    <button class="btn" onclick="downloadHW()">Download Snapshot</button>
    <div id="hwList" class="grid grid-2"></div>
  </section>

  <section id="teachers">
    <h2>Teachers</h2>
    <div class="grid grid-3" id="teachersList"></div>
  </section>

  <section id="events">
    <h2>Events Timeline</h2>
    <div id="eventsList"></div>
  </section>

  <section id="notices">
    <h2>Notices</h2>
    <div id="noticesList" class="grid grid-2"></div>
  </section>

  <section id="timetable">
    <h2>Timetable</h2>
    <div class="card">
      <table id="ttTable"></table>
    </div>
  </section>

  <section id="gallery">
    <h2>Gallery</h2>
    <div class="grid grid-3" id="galleryList"></div>
  </section>

  <section id="achievements">
    <h2>Achievements</h2>
    <div class="grid grid-2" id="achList"></div>
  </section>

  <section id="faq">
    <h2>FAQ</h2>
    <div id="faqList"></div>
  </section>

  <section id="contact">
    <h2>Contact Us</h2>
    <form id="contactForm" onsubmit="saveContact(event)">
      <input required name="name" placeholder="Your Name">
      <input required name="email" type="email" placeholder="Email">
      <textarea required name="msg" placeholder="Message"></textarea>
      <button class="btn">Send</button>
    </form>
  </section>

  <section id="labs">
    <h2>Creative Labs</h2>
    <div class="grid grid-3">
      <div class="card"><h3>Nebula Studio</h3><p>Visual Storytelling & Digital Canvas</p></div>
      <div class="card"><h3>Quantum Forge</h3><p>XR & Immersive Realities</p></div>
      <div class="card"><h3>Alchemy Suite</h3><p>Audio & Sensory Design</p></div>
    </div>
  </section>
</main>

<div class="fab" onclick="scrollToTop()">â†‘</div>
<div class="theme-toggle" onclick="toggleTheme()">ðŸŒ“</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <button class="close" onclick="closeLightbox()">Ã—</button>
  <img id="lightboxImg" src="">
  <button class="prev" onclick="prevImg()">â€¹</button>
  <button class="next" onclick="nextImg()">â€º</button>
</div>

<script>
// === UTILS ===
function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}
function $(sel){return document.querySelector(sel)}
function $$(sel){return document.querySelectorAll(sel)}

// === PARTICLES ===
const canvas=$('#particles'),ctx=canvas.getContext('2d');
let particles=[];
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
window.addEventListener('resize',resize);resize();
class Particle{
  constructor(){
    this.x=rand(0,canvas.width);
    this.y=rand(0,canvas.height);
    this.r=rand(.5,2);
    this.vx=(Math.random()-.5)*.5;
    this.vy=(Math.random()-.5)*.5;
  }
  update(){
    this.x+=this.vx;this.y+=this.vy;
    if(this.x<0||this.x>canvas.width)this.vx*=-1;
    if(this.y<0||this.y>canvas.height)this.vy*=-1;
  }
  draw(){
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
    ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--accent');
    ctx.globalAlpha=.2;
    ctx.fill();
    ctx.globalAlpha=1;
  }
}
for(let i=0;i<150;i++)particles.push(new Particle);
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{p.update();p.draw();});
  requestAnimationFrame(animateParticles);
}
animateParticles();

// === ACCESS GATE ===
function submitGate(){
  const name=$('#stuName').value.trim();
  const cls=$('#stuClass').value.trim();
  const parent=$('#parentName').value.trim();
  if(!name||!cls||!parent)return alert('Fill all fields');
  localStorage.setItem('mkps_student',JSON.stringify({name,cls,parent}));
  $('#gate').classList.add('hidden');
  $('#welcomeName').textContent=name;
}
const saved=localStorage.getItem('mkps_student');
if(saved){
  const {name}=JSON.parse(saved);
  $('#gate').classList.add('hidden');
  $('#welcomeName').textContent=name;
}

// === THEME ===
function toggleTheme(){
  document.body.classList.toggle('light');
  localStorage.setItem('mkps_theme',document.body.classList.contains('light')?'light':'dark');
}
if(localStorage.getItem('mkps_theme')==='light')toggleTheme();

// === LOCALSTORAGE HELPERS ===
function save(key,data){localStorage.setItem(key,JSON.stringify(data));window.dispatchEvent(new Event('mkps_update'))}
function load(key,fallback=[]){try{return JSON.parse(localStorage.getItem(key))||fallback}catch{return fallback}}

// === SEED DEMO DATA ===
if(!localStorage.getItem('mkps_demo')){
  save('mkps_homework',[
    {id:1,class:'10',subject:'Maths',title:'Algebra Worksheet',due:'2025-08-20'},
    {id:2,class:'11',subject:'Physics',title:'Lab Report',due:'2025-08-18'}
  ]);
  save('mkps_teachers',[
    {name:'Dr. Elara Voss',subject:'Nebula Arts',avatar:'https://i.pravatar.cc/150?img=1'},
    {name:'Prof. Orion Kai',subject:'Quantum Forge',avatar:'https://i.pravatar.cc/150?img=2'}
  ]);
  save('mkps_events',[
    {date:'2025-08-25',title:'Nebula Showcase',desc:'Annual XR exhibition'},
    {date:'2025-09-05',title:'Science Fair',desc:'Innovation challenge'}
  ]);
  save('mkps_notices',[
    {title:'Holiday Notice',priority:1,content:'School closed on 15 Aug'},
    {title:'New Lab Equipment',priority:2,content:'Alchemy Suite upgraded'}
  ]);
  save('mkps_timetable',[
    {day:'Mon',periods:['Maths','Physics','Break','Nebula','English']},
    {day:'Tue',periods:['Chemistry','Maths','Break','Forge','Sports']}
  ]);
  save('mkps_gallery',[
    'https://picsum.photos/400/300?random=1',
    'https://picsum.photos/400/300?random=2',
    'https://picsum.photos/400/300?random=3'
  ]);
  save('mkps_achievements',[
    {title:'National Coding Champion',desc:'Won 1st prize',icon:'ðŸ†'},
    {title:'100% Attendance',desc:'Entire year',icon:'ðŸ¥‡'}
  ]);
  save('mkps_faq',[
    {q:'How to join labs?',a:'Submit interest via contact form.'},
    {q:'Contact hours?',a:'8 AM to 4 PM'}
  ]);
  localStorage.setItem('mkps_demo','1');
}

// === RENDER FUNCTIONS ===
function renderHomework(list){
  $('#hwList').innerHTML='';
  list.forEach(hw=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${hw.subject}</h3><p>${hw.title}</p><small>Due: ${hw.due}</small>`;
    $('#hwList').appendChild(div);
  });
}
function renderTeachers(list){
  $('#teachersList').innerHTML='';
  list.forEach(t=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<img src="${t.avatar}" style="border-radius:50%;width:80px"><h3>${t.name}</h3><p>${t.subject}</p>`;
    $('#teachersList').appendChild(div);
  });
}
function renderEvents(list){
  $('#eventsList').innerHTML='';
  list.forEach(e=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${e.title}</h3><small>${e.date}</small><p>${e.desc}</p>`;
    $('#eventsList').appendChild(div);
  });
}
function renderNotices(list){
  $('#noticesList').innerHTML='';
  list.forEach(n=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${n.title}${n.priority===1?'<span style="color:red"> ðŸ”´</span>':''}</h3><p>${n.content}</p>`;
    $('#noticesList').appendChild(div);
  });
}
function renderTimetable(list){
  $('#ttTable').innerHTML='<tr><th>Day</th><th>Period 1</th><th>Period 2</th><th>Break</th><th>Period 3</th><th>Period 4</th></tr>';
  list.forEach(row=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${row.day}</td>`+row.periods.map(p=>`<td>${p}</td>`).join('');
    $('#ttTable').appendChild(tr);
  });
}
function renderGallery(list){
  $('#galleryList').innerHTML='';
  list.forEach(src=>{
    const img=document.createElement('img');
    img.src=src;img.style.width='100%';img.style.borderRadius='var(--radius)';img.style.cursor='pointer';
    img.onclick=()=>openLightbox(src,list.indexOf(src));
    $('#galleryList').appendChild(img);
  });
}
function renderAchievements(list){
  $('#achList').innerHTML='';
  list.forEach(a=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h1>${a.icon}</h1><h3>${a.title}</h3><p>${a.desc}</p>`;
    $('#achList').appendChild(div);
  });
}
function renderFAQ(list){
  $('#faqList').innerHTML='';
  list.forEach(f=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<h3>${f.q}</h3><p>${f.a}</p>`;
    $('#faqList').appendChild(div);
  });
}

// === INIT RENDER ===
renderHomework(load('mkps_homework'));
renderTeachers(load('mkps_teachers'));
renderEvents(load('mkps_events'));
renderNotices(load('mkps_notices'));
renderTimetable(load('mkps_timetable'));
renderGallery(load('mkps_gallery'));
renderAchievements(load('mkps_achievements'));
renderFAQ(load('mkps_faq'));

// === FILTER & EXPORT ===
function filterHW(){
  const q=$('#hwSearch').value.toLowerCase();
  const c=$('#hwFilter').value;
  let list=load('mkps_homework');
  if(c)list=list.filter(h=>h.class===c);
  if(q)list=list.filter(h=>h.title.toLowerCase().includes(q)||h.subject.toLowerCase().includes(q));
  renderHomework(list);
}
function printHW(){window.print()}
function downloadHW(){
  const list=load('mkps_homework');
  const blob=new Blob([JSON.stringify(list,null,2)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;a.download='homework.json';a.click();
}

// === CONTACT ===
function saveContact(e){
  e.preventDefault();
  const fd=new FormData(e.target);
  const data={name:fd.get('name'),email:fd.get('email'),msg:fd.get('msg')};
  const contacts=load('mkps_contacts');
  contacts.push(data);
  save('mkps_contacts',contacts);
  alert('Message saved locally');
  e.target.reset();
}

// === LIGHTBOX ===
let lightboxImgs=[];let lightboxIndex=0;
function openLightbox(src,index){
  lightboxImgs=load('mkps_gallery');
  lightboxIndex=index;
  $('#lightboxImg').src=src;
  $('#lightbox').classList.add('active');
}
function closeLightbox(){$('#lightbox').classList.remove('active')}
function prevImg(){
  lightboxIndex=(lightboxIndex-1+lightboxImgs.length)%lightboxImgs.length;
  $('#lightboxImg').src=lightboxImgs[lightboxIndex];
}
function nextImg(){
  lightboxIndex=(lightboxIndex+1)%lightboxImgs.length;
  $('#lightboxImg').src=lightboxImgs[lightboxIndex];
}
document.addEventListener('keydown',e=>{
  if(!$('#lightbox').classList.contains('active'))return;
  if(e.key==='ArrowLeft')prevImg();
  if(e.key==='ArrowRight')nextImg();
  if(e.key==='Escape')closeLightbox();
});

// === SCROLL TO TOP ===
function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'})}

// === AUTO REFRESH ===
window.addEventListener('mkps_update',()=>{
  renderHomework(load('mkps_homework'));
  renderTeachers(load('mkps_teachers'));
  renderEvents(load('mkps_events'));
  renderNotices(load('mkps_notices'));
  renderTimetable(load('mkps_timetable'));
  renderGallery(load('mkps_gallery'));
  renderAchievements(load('mkps_achievements'));
  renderFAQ(load('mkps_faq'));
});
</script>
</body>
</html>
```
